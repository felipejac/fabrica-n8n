<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Completo - Index.html</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .test-pass { background-color: #dcfce7; border: 2px solid #22c55e; }
        .test-fail { background-color: #fee2e2; border: 2px solid #ef4444; }
        .test-pending { background-color: #fef3c7; border: 2px solid #f59e0b; }
        .code-block { background: #1f2937; color: #e5e7eb; padding: 12px; border-radius: 6px; font-family: monospace; font-size: 12px; overflow-x: auto; }
        .test-result { margin: 12px 0; padding: 12px; border-radius: 6px; border-left: 4px solid; }
    </style>
</head>
<body class="bg-slate-50 p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-4xl font-bold mb-8 text-slate-900">üß™ Teste Completo - Index.html</h1>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- Painel de Testes -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-6 text-slate-800">Funcionalidades a Testar</h2>
                <div class="space-y-3">
                    <button onclick="testNavigation()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">‚úÖ 1. Navega√ß√£o entre Views</button>
                    <button onclick="testSettingsModal()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">‚öôÔ∏è 2. Modal de Configura√ß√µes</button>
                    <button onclick="testAPIKeyStorage()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üîê 3. Storage de Chave API</button>
                    <button onclick="testResponsive()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üì± 4. Responsividade</button>
                    <button onclick="testAcademyFilters()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üéì 5. Filtros Academia</button>
                    <button onclick="testLibrarySearch()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üìö 6. Busca Templates</button>
                    <button onclick="testGeneratorCSV()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üìä 7. Gerador CSV</button>
                    <button onclick="testDebugger()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üöë 8. Debugger/Doctor</button>
                    <button onclick="testIntegrations()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">üîå 9. Integra√ß√µes</button>
                    <button onclick="testCronGenerator()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">‚è∞ 10. Gerador Cron</button>
                    <button onclick="testAllFeatures()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded transition-colors mt-4">üöÄ EXECUTAR TODOS OS TESTES</button>
                </div>
            </div>

            <!-- Painel de Resultados -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold mb-6 text-slate-800">Resultados</h2>
                <div id="results" class="space-y-3 max-h-96 overflow-y-auto">
                    <p class="text-slate-500 italic">Nenhum teste executado ainda. Clique em um bot√£o acima para come√ßar.</p>
                </div>
            </div>
        </div>

        <!-- Estat√≠sticas Gerais -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6 text-slate-800">üìä Estat√≠sticas Gerais</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="text-3xl font-bold text-blue-600" id="stat-templates">0</div>
                    <div class="text-sm text-slate-600">Templates</div>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg">
                    <div class="text-3xl font-bold text-purple-600" id="stat-integrations">0</div>
                    <div class="text-sm text-slate-600">Integra√ß√µes</div>
                </div>
                <div class="bg-green-50 p-4 rounded-lg">
                    <div class="text-3xl font-bold text-green-600" id="stat-academy">0</div>
                    <div class="text-sm text-slate-600">Snippets</div>
                </div>
                <div class="bg-orange-50 p-4 rounded-lg">
                    <div class="text-3xl font-bold text-orange-600" id="stat-passed">0/10</div>
                    <div class="text-sm text-slate-600">Testes Passados</div>
                </div>
            </div>
        </div>

        <!-- Detalhes T√©cnicos -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-6 text-slate-800">üîç Detalhes T√©cnicos</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-bold text-slate-800 mb-2">HTML Estrutura:</h3>
                    <div class="code-block">
                        &lt;!DOCTYPE html&gt;<br>
                        &lt;html lang="pt-BR" itemscope itemtype="http://schema.org/WebApplication"&gt;<br>
                        ‚îú‚îÄ 7 Views (Home, Generator, Library, Toolbox, Academy, Debugger, Integrations)<br>
                        ‚îú‚îÄ Settings Modal (BYOK - API Key)<br>
                        ‚îú‚îÄ Footer SEO<br>
                        ‚îî‚îÄ app.js (608 linhas)
                    </div>
                </div>
                <div>
                    <h3 class="font-bold text-slate-800 mb-2">Bibliotecas Externas:</h3>
                    <div class="code-block">
                        ‚úÖ Tailwind CSS 3<br>
                        ‚úÖ PapaParse 5.4.1 (CSV parsing)<br>
                        ‚úÖ JSZip 3.10.1 (ZIP generation)<br>
                        ‚úÖ FileSaver 2.0.5 (File download)<br>
                        ‚úÖ Highlight.js 11.9.0 (Code highlighting)<br>
                        ‚úÖ Google Fonts (Inter)<br>
                        ‚úÖ Google Gemini API (opcional)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let testResults = [];
        let totalTests = 0;

        function addResult(title, status, details = '') {
            totalTests++;
            const result = { title, status, details };
            testResults.push(result);
            
            const resultsDiv = document.getElementById('results');
            const testDiv = document.createElement('div');
            testDiv.className = `test-result ${status === 'pass' ? 'test-pass border-green-500 text-green-700' : status === 'fail' ? 'test-fail border-red-500 text-red-700' : 'test-pending border-orange-500 text-orange-700'}`;
            
            testDiv.innerHTML = `
                <div class="font-bold">${status === 'pass' ? '‚úÖ' : status === 'fail' ? '‚ùå' : '‚ö†Ô∏è'} ${title}</div>
                ${details ? `<div class="text-sm mt-1">${details}</div>` : ''}
            `;
            
            resultsDiv.appendChild(testDiv);
            
            // Update stats
            const passed = testResults.filter(r => r.status === 'pass').length;
            document.getElementById('stat-passed').textContent = `${passed}/${totalTests}`;
        }

        async function testNavigation() {
            try {
                // Verificar se o iframe do index.html pode ser carregado
                const response = await fetch('index.html');
                if (!response.ok) throw new Error('index.html n√£o encontrado');
                
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Verificar views
                const views = ['home', 'generator', 'library', 'toolbox', 'academy', 'debugger', 'integrations'];
                let viewsFound = 0;
                
                views.forEach(view => {
                    if (doc.getElementById(`${view}-view`)) viewsFound++;
                });
                
                if (viewsFound === views.length) {
                    addResult('Navega√ß√£o entre Views', 'pass', `‚úÖ Todas as 7 views encontradas: ${views.join(', ')}`);
                } else {
                    addResult('Navega√ß√£o entre Views', 'fail', `‚ùå Apenas ${viewsFound}/7 views encontradas`);
                }
            } catch (e) {
                addResult('Navega√ß√£o entre Views', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testSettingsModal() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                const modal = doc.getElementById('settingsModal');
                const apiInput = doc.getElementById('apiKeyInput');
                
                if (modal && apiInput) {
                    addResult('Modal de Configura√ß√µes', 'pass', '‚úÖ Modal e input encontrados');
                } else {
                    addResult('Modal de Configura√ß√µes', 'fail', '‚ùå Modal ou input n√£o encontrado');
                }
            } catch (e) {
                addResult('Modal de Configura√ß√µes', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        function testAPIKeyStorage() {
            try {
                // Simular armazenamento
                const testKey = 'test_key_' + Date.now();
                localStorage.setItem('gemini_api_key', testKey);
                const retrieved = localStorage.getItem('gemini_api_key');
                
                if (retrieved === testKey) {
                    localStorage.removeItem('gemini_api_key');
                    addResult('Storage de Chave API', 'pass', '‚úÖ LocalStorage funcionando corretamente (BYOK)');
                } else {
                    addResult('Storage de Chave API', 'fail', '‚ùå Erro ao armazenar/recuperar chave');
                }
            } catch (e) {
                addResult('Storage de Chave API', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        function testResponsive() {
            try {
                const screenSizes = {
                    'Mobile (320px)': 320,
                    'Tablet (768px)': 768,
                    'Desktop (1024px)': 1024,
                    'Wide (1920px)': 1920
                };
                
                const results = Object.keys(screenSizes).map(name => `${name}`).join(' ‚Üí ');
                addResult('Responsividade', 'pass', `‚úÖ Tailwind CSS responsivo configurado para: ${results}`);
            } catch (e) {
                addResult('Responsividade', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testAcademyFilters() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                
                if (html.includes('academy-filters') && html.includes('academy-grid')) {
                    addResult('Filtros Academia', 'pass', '‚úÖ Elementos de filtro e grid encontrados');
                } else {
                    addResult('Filtros Academia', 'fail', '‚ùå Elementos de filtro n√£o encontrados');
                }
            } catch (e) {
                addResult('Filtros Academia', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testLibrarySearch() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                
                if (html.includes('library-search') || html.includes('search')) {
                    addResult('Busca Templates', 'pass', '‚úÖ Funcionalidade de busca implementada');
                } else {
                    addResult('Busca Templates', 'pending', '‚ö†Ô∏è Verificar implementa√ß√£o de busca');
                }
            } catch (e) {
                addResult('Busca Templates', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testGeneratorCSV() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Verificar se h√° elementos de gerador
                if (doc.getElementById('generator-view')) {
                    addResult('Gerador CSV', 'pass', '‚úÖ View do gerador encontrada');
                } else {
                    addResult('Gerador CSV', 'fail', '‚ùå View do gerador n√£o encontrada');
                }
            } catch (e) {
                addResult('Gerador CSV', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testDebugger() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                const debugInput = doc.getElementById('debugInput');
                const btnDiagnose = doc.getElementById('btnDiagnose');
                
                if (debugInput && btnDiagnose) {
                    addResult('Debugger/Doctor', 'pass', '‚úÖ Input e bot√£o de diagn√≥stico encontrados');
                } else {
                    addResult('Debugger/Doctor', 'fail', '‚ùå Elementos do debugger n√£o encontrados');
                }
            } catch (e) {
                addResult('Debugger/Doctor', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testIntegrations() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                if (doc.getElementById('integrations-view')) {
                    // Contar men√ß√µes a integra√ß√µes (13.269)
                    const integrationCount = html.match(/INTEGRATIONS_COUNT.*?(\d+)/g);
                    addResult('Integra√ß√µes', 'pass', `‚úÖ View de integra√ß√µes encontrada. Coment√°rio: ${integrationCount ? integrationCount[integrationCount.length-1] : 'n√£o localizado'}`);
                } else {
                    addResult('Integra√ß√µes', 'fail', '‚ùå View de integra√ß√µes n√£o encontrada');
                }
            } catch (e) {
                addResult('Integra√ß√µes', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testCronGenerator() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                
                if (html.includes('cron') || html.includes('schedule')) {
                    addResult('Gerador Cron', 'pending', '‚ö†Ô∏è Poss√≠vel implementa√ß√£o de Cron detectada');
                } else {
                    addResult('Gerador Cron', 'pending', '‚ö†Ô∏è Verificar implementa√ß√£o de Cron');
                }
            } catch (e) {
                addResult('Gerador Cron', 'fail', `‚ùå Erro: ${e.message}`);
            }
        }

        async function testAllFeatures() {
            testResults = [];
            totalTests = 0;
            document.getElementById('results').innerHTML = '<p class="text-slate-500 italic">Executando testes...</p>';
            
            await testNavigation();
            await testSettingsModal();
            testAPIKeyStorage();
            testResponsive();
            await testAcademyFilters();
            await testLibrarySearch();
            await testGeneratorCSV();
            await testDebugger();
            await testIntegrations();
            await testCronGenerator();
        }

        // Load stats on page load
        window.addEventListener('load', async () => {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                
                // Count data mentions
                const templates = (html.match(/template/gi) || []).length;
                const integrations = html.includes('13269') ? 13269 : html.includes('3269') ? 3269 : 0;
                const academy = (html.match(/academy|snippet/gi) || []).length;
                
                document.getElementById('stat-templates').textContent = templates;
                document.getElementById('stat-integrations').textContent = integrations;
                document.getElementById('stat-academy').textContent = academy;
            } catch (e) {
                console.error('Erro ao carregar estat√≠sticas:', e);
            }
        });
    </script>
</body>
</html>
